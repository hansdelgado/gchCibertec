<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="pe.edu.cibertec.gch.modelo.mapper.LaboratorioMapper">
    
   <select id="obtenerLaboratorios" 
            resultType="Laboratorio" >
        SELECT codigo,
               nombre,
               descripcion,
               local,
               pabellon,
               salon,
               capacidad,
               estado as estadoString
        FROM laboratorio
    </select>
    
    <select id="obtenerLaboratoriosSegun" 
            resultType="Laboratorio" 
            parameterType="Laboratorio">
        SELECT codigo,
               nombre,
               descripcion,
               local,
               pabellon,
               salon,
               capacidad,
               estado as estadoString
        FROM laboratorio
        <where>
            <if test="nombre != null">
                AND upper(nombre) LIKE upper(#{nombre})
            </if>
            <if test="local != null ">
                AND  UPPER(local) LIKE UPPER(#{local})
            </if>
        </where>
    </select>
    
    <select id="obtenerLaboratorioXCodigo" 
            resultType="Laboratorio" 
            parameterType="string">
        SELECT codigo,
               nombre,
               descripcion,
               local,
               pabellon,
               salon,
               capacidad,
               estado as estadoString
        FROM laboratorio
        WHERE codigo = #{codigo}
    </select>
    
    <insert  id="insertar" parameterType="Laboratorio">
        INSERT INTO laboratorio
        (codigo,nombre,descripcion,
        local,pabellon,salon,
        capacidad,estado)
        VALUES
        (#{codigo},#{nombre},#{descripcion},#{local},#{pabellon},
        #{salon},#{capacidad},#{estadoString})
    </insert>
    
    <update  id="modificar"
             parameterType="Laboratorio">
        UPDATE laboratorio
        SET
            nombre=#{nombre},
            descripcion=#{descripcion},
            local=#{local},
            pabellon=#{pabellon},
            salon=#{salon},
            capacidad=#{capacidad},
            estado=#{estadoString}
        WHERE codigo = #{codigo};
    </update>
    
    <delete  id="eliminar" 
             parameterType="string">
        DELETE FROM laboratorio
         WHERE codigo = #{codigo};
    </delete>
</mapper>

   